<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Prioritize Variables with Joint Variable Importance Plot in Observational Study Design • jointVIP</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Prioritize Variables with Joint Variable Importance Plot in Observational Study Design">
<meta name="description" content='In the observational study design stage, matching/weighting methods are conducted. However, when many background variables are present, the decision as to which variables to prioritize for matching/weighting is not trivial. Thus, the joint treatment-outcome variable importance plots are created to guide variable selection. The joint variable importance plots enhance variable comparisons via unadjusted bias curves derived under the omitted variable bias framework. The plots translate variable importance into recommended values for tuning parameters in existing methods. Post-matching and/or weighting plots can also be used to visualize and assess the quality of the observational study design. The method motivation and derivation is presented in "Prioritizing Variables for Observational Study Design using the Joint Variable Importance Plot" by Liao et al. (2024) &lt;doi:10.1080/00031305.2024.2303419&gt;. See the package paper by Liao and Pimentel (2023) &lt;arxiv:2302.10367&gt; for a beginner friendly user introduction.'>
<meta property="og:description" content='In the observational study design stage, matching/weighting methods are conducted. However, when many background variables are present, the decision as to which variables to prioritize for matching/weighting is not trivial. Thus, the joint treatment-outcome variable importance plots are created to guide variable selection. The joint variable importance plots enhance variable comparisons via unadjusted bias curves derived under the omitted variable bias framework. The plots translate variable importance into recommended values for tuning parameters in existing methods. Post-matching and/or weighting plots can also be used to visualize and assess the quality of the observational study design. The method motivation and derivation is presented in "Prioritizing Variables for Observational Study Design using the Joint Variable Importance Plot" by Liao et al. (2024) &lt;doi:10.1080/00031305.2024.2303419&gt;. See the package paper by Liao and Pimentel (2023) &lt;arxiv:2302.10367&gt; for a beginner friendly user introduction.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">jointVIP</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/jointVIP.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/additional_options.html">Additional options available in the `jointVIP` package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ldliao/jointVIP/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="joint-variable-importance-plot-">Joint variable importance plot <img src="reference/figures/jointVIP_logo.png" align="right" width="150"><a class="anchor" aria-label="anchor" href="#joint-variable-importance-plot-"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p>Joint variable importance plot (jointVIP) visualizes each variable’s outcome importance via Pearson’s correlation and treatment importance via cross-sample standardized mean differences. Bias curves enable comparisons to support variable prioritization among potential confounders.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the <code>jointVIP</code> package on CRAN using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># for version on CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"jointVIP"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for development version on github</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ldliao/jointVIP"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="brfss-example">BRFSS Example<a class="anchor" aria-label="anchor" href="#brfss-example"></a>
</h2>
<p>To demonstrate, we use the 2015 Behavioral Risk Factor Surveillance System (BRFSS) example to answer the causal question: Does smoking increase the risk of chronic obstructive pulmonary disease (COPD)? The data and background is inspired by <a href="https://library.virginia.edu/data/articles/getting-started-with-matching-methods" class="external-link">Clay Ford’s work from University of Virginia Library</a>. First, the data is cleaned to only have numeric variables, i.e., all factored variables are transformed via one-hot-encoding. Treatment variable <code>smoke</code> only contains 0 (control) and 1 (treatment).</p>
<p>With the cleaned data, you can specify details in the function <code><a href="reference/create_jointVIP.html">create_jointVIP()</a></code> like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ldliao/jointVIP" class="external-link">jointVIP</a></span><span class="op">)</span></span>
<span><span class="co">## basic example code</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:testthat':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     matches</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">data</span>(<span class="st">'brfss'</span>, <span class="at">package=</span><span class="st">'jointVIP'</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>treatment <span class="ot">=</span> <span class="st">'smoke'</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>outcome <span class="ot">=</span> <span class="st">'COPD'</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>covariates <span class="ot">=</span> <span class="fu">names</span>(brfss)[<span class="sc">!</span><span class="fu">names</span>(brfss) <span class="sc">%in%</span> <span class="fu">c</span>(treatment, outcome)]</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="do">## select the pilot sample from random portion</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="do">## pilot data here are considered as 'external controls'</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="do">## can be a separate dataset; should be chosen with caution</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234895</span>)</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>pilot_prop <span class="ot">=</span> <span class="fl">0.2</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>pilot_sample_num <span class="ot">=</span> <span class="fu">sample</span>(<span class="fu">which</span>(brfss <span class="sc">%&gt;%</span> <span class="fu">pull</span>(treatment) <span class="sc">==</span> <span class="dv">0</span>),</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>                          <span class="fu">length</span>(<span class="fu">which</span>(brfss <span class="sc">%&gt;%</span> <span class="fu">pull</span>(treatment) <span class="sc">==</span> <span class="dv">0</span>)) <span class="sc">*</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="do">## set up pilot and analysis data</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="do">## we want to make sure these two data are non-overlapping</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="at">pilot_df =</span> brfss[pilot_sample_num, ]</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="at">analysis_df =</span> brfss[<span class="sc">-</span>pilot_sample_num, ]</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="do">## minimal example</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="at">brfss_jointVIP =</span> <span class="fu">create_jointVIP</span>(<span class="at">treatment =</span> treatment,</span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>                                 <span class="at">outcome =</span> outcome,</span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a>                                 <span class="at">covariates =</span> covariates,</span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a>                                 <span class="at">pilot_df =</span> pilot_df,</span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a>                                 <span class="at">analysis_df =</span> analysis_df)</span></code></pre></div>
<p>Generic functions can be used for the <code>jointVIP</code> object to extract information as a glance with <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> and <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">brfss_jointVIP</span><span class="op">)</span></span>
<span><span class="co">#&gt; Max absolute bias is 0.032</span></span>
<span><span class="co">#&gt; 3 variables are above the desired 0.01 absolute bias tolerance</span></span>
<span><span class="co">#&gt; 13 variables can be plotted</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">brfss_jointVIP</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 bias</span></span>
<span><span class="co">#&gt; age_over65     0.032</span></span>
<span><span class="co">#&gt; average_drinks 0.031</span></span>
<span><span class="co">#&gt; age_25to34     0.012</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">brfss_jointVIP</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot-1.png" width="80%" style="display: block; margin: auto;"></p>
<p>In this example, <code>age_over65</code> and <code>average_drinks</code> are two most important variables to adjust. At a bias tolerance of 0.01, 3 variables: <code>age_over65</code>, <code>average_drinks</code>, and <code>age_25to34</code> are above the tolerance threshold. Moreover, <code>age_over65</code> and <code>average_drinks</code> are of higher importance for adjustment than <code>age_25to34</code>. Although <code>race_black</code> and <code>age_over65</code> have similar absolute standardized mean differences (0.322 and 0.333, respectively), <code>age_over65</code> is more important to adjust for since its highly correlated with the outcome.</p>
</div>
<div class="section level2">
<h2 id="acknowledgement">Acknowledgement<a class="anchor" aria-label="anchor" href="#acknowledgement"></a>
</h2>
<ul>
<li>Centers for Disease Control and Prevention (CDC). Behavioral Risk Factor Surveillance System Survey Questionnaire. Atlanta, Georgia: U.S. Department of Health and Human Services, Centers for Disease Control and Prevention, 2015.</li>
<li>Ford, C. 2018. “Getting Started with Matching Methods.” UVA Library StatLab. <a href="https://library.virginia.edu:443/data/articles/getting-started-with-matching-methods" class="external-link uri">https://library.virginia.edu:443/data/articles/getting-started-with-matching-methods</a> (accessed Jan 29, 2024).</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=jointVIP" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/ldliao/jointVIP/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ldliao/jointVIP/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing jointVIP</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Lauren D. Liao <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-4697-6909" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Samuel D. Pimentel <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-0409-6586" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=jointVIP" class="external-link"><img src="https://img.shields.io/cran/v/jointVIP?color=952100" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=jointVIP" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/jointVIP?color=952100" alt="CRAN_Downloads_Badge"></a></li>
<li><a href="https://joss.theoj.org/papers/e129c0419dd539da37625f5517de1124" class="external-link"><img src="https://joss.theoj.org/papers/e129c0419dd539da37625f5517de1124/status.svg" alt="status"></a></li>
<li><a href="https://github.com/ldliao/jointVIP/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/ldliao/jointVIP/actions/workflows/test-coverage.yaml/badge.svg?branch=main" alt="test-coverage"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://opensource.org/license/mit" class="external-link"><img src="http://img.shields.io/badge/license-MIT-brightgreen.svg" alt="MIT license"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lauren D. Liao, Samuel D. Pimentel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
